---
- pip:
    name: packet-python

- include_vars: packet_config.yaml
- packet_sshkey:
    key_file: "{{packet_ssh_key}}"
    label: "OKD KubeVirt Demo Key"
    auth_token: "{{packet_auth_token}}"

- packet_device:
    project_id: "{{packet_project_id}}"
    auth_token: "{{packet_auth_token}}"
    hostnames: "okd.kubevirt.demo"
    operating_system: centos_7
    plan: x1.small.x86
    facility: yyz1
    wait_for_public_IPv: 4
  register: device_output

- debug:
    var: "{{item.public_ipv4}}"
  with_items: "{{device_output.devices}}"
